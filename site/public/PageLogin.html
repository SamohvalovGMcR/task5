<!DOCTYPE html>

<html lang="ru">

<head>
    <meta name="viewport" content="width=device-width">
    <meta charset="utf-8">
    <title>Экспериментальный сайт.</title>
    <meta name="description" content="Экспериментальный сайт.">
    <meta name="author" content="Samohwalov Dmitriy">
    <link rel="stylesheet" href="stylesheets/style1.css">
    <script src=""></script>

</head>

<body>
    <script src="http://localhost:3033/socket.io/socket.io.js"></script>
    <script src="scriptSconn.js"></script>



    <div id="in2" style=" border: 2px solid red; padding:5px"></div>
    <div> <a href="index.html" style="">На главную</a></div>
    <div class="login">
        <h3>Вход</h3>
        <label for="login">Логин</label>
        <input type="text" id="login" name="login" />
        <label for="password">Пароль</label>
        <input type="password" id="password" name="password" />
        <input type="submit" value="Войти" id="loginB" />
    </div>


    <script>
        // const socket = io.connect('http://localhost:3033');


        socket.on('whuN', function() {

            socket.emit("whuS");
        });


        socket.on('whu', function(value) {
            // alert("yes!");
            in2.innerHTML = "";
            //in2.innerHTML = JSON.stringify(value);
            value.map(el => {
                var divE = document.createElement('div');
                var divp = document.createElement('span');
                var divA = document.createElement('span');


                divp.innerHTML = "<br> " + el.name + "=" + el.passw + "=" + el.id + "<br> ";

                divE.appendChild(divp);
                divE.appendChild(divA);
                in2.appendChild(divE);
            }); //map


        });

        loginB.onclick = () => {
            socket.emit("login", ([login.value, password.value]));

            window.localStorage.setItem("aName", login.value);
            //alert('aName1' + window.localStorage.getItem('aName'));
            login.value = "";
            password.value = "";
        };
    </script>

</body>

</html>